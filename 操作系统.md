# 进程和线程
  - 进程是资源分配的基本单位，线程是调度的基本单位
  - 上下文切换
    - 发生场景
      - 多任务
      - 中断处理
      - 用户态、内核态的切换（PS：并不属于上下文交换，但不同操作系统有不同实现，因此可能存在上下文切换）
    - 步骤
      - 将特权级别提高至内核模式，进入内核
      - 保存PC（Program Counter，指令指针/程序计数器/指令计数器）、当前进程的内核栈指针（每个线程有自己的栈）、寄存器数据
      - 从陷阱返回，切换栈
      - PS:恢复与保存都发生在内核栈


# 内存碎片
  - 分类：分为内部碎片和外部碎片
    - 内部碎片属于某个进程，由于分给进程的页面内存大小可能略大于进程所需的内存大小，因此存在部分内存无法得到利用
    - 外部碎片是未被分配的内存，由于夹杂在已分配进程的内存之间，大小不足而无法被分配
  - 解决：从OS角度或从编程角度
    - 从OS角度
      - 段页式存储，避免外部碎片，但仍有内部碎片
      - 紧凑(compaction)，通过移动分配给进程的内存分区，以合并外部碎片。紧凑的条件是：所有的应用程序可动态重定位
    - 从编程角度
      - 基于结构体的内存对齐原则，注意变量的存放顺序，尽量减少padding大小
# 进程调度
  - 指标
    - 周转时间：完成时间-到达时间
    - 响应时间：响应时间-到达时间
  - 1）FIFO，先进先出，不可抢占
  - 2）SJF（Shortest Job First，最短任务优先），不可抢占当前已运行任务，但会对已到达任务按照花费时间时间排序
  - 3）STCF（Shortest Time-to-Completion First，最短完成时间优先），可抢占，尽早完成耗时短的任务，以取得最小的平均完成时间，是1/2/3中周转时间最佳的调度策略
  - 4）RR（Round Robin，轮转），分为多个时间片，轮流执行所有已到达的任务，是响应时间最佳的调度策略
  - 一种著名的调度方法————MLFQ（Multi-level Feedback Queue，多级反馈队列），有以下几条规则
    - 优先运行高优先级任务
    - 同优先级使用RR调度
    - 任务刚刚进入系统时，放在最高优先级
    - 用完该层时间配额后就降低其优先级
    - 经过一段时间后，就将所有工作重新放入最高优先级队列
# IPC
  https://blog.csdn.net/jojozym/article/details/105638874
